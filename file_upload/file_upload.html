<html>
<head>
	<meta charset="UTF-8">
</head>
<body>

<form action="upload_file.php" method="post"
enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="file" id="file" /> 
<br />
<input type="submit" name="submit" value="Submit" />
</form>
<form id= "uploadForm">
      <p >指定文件名： <input type="text" name="filename" value= ""/></p >
      <p >上传文件： <input type="file" name="file"/></ p>
      <input type="button" value="上传" onclick="doUpload()" />
</form>
<script type="text/javascript" src="../js/jquery-1.11.3.min.js"></script>
<script type="text/javascript">
	function doUpload() {
	     var formData = new FormData($( "#uploadForm" )[0]);
	     console.log(formData);
	     $.ajax({
	          url: 'upload_file.php' ,
	          type: 'POST',
	          data: formData,
	          async: false,
	          cache: false,
	          contentType: false,
	          processData: false,
	          success: function (returndata) {
	              alert(returndata);
	          },
	          error: function (returndata) {
	              alert(returndata);
	          }
	     });
	}
	// $(document).ready(function() {
	// 	var oData = new FormData(document.forms.namedItem("uploadForm" ));
	// 	oData.append( "CustomField", "This is some extra data" );
	// 	var oReq = new XMLHttpRequest();
	// 	oReq.open( "POST", "stash.php" , true );
	// 	oReq.onload = function(oEvent) {
	// 	      if (oReq.status == 200) {
	// 	          oOutput.innerHTML = "Uploaded!" ;
	// 	     } else {
	// 	          oOutput.innerHTML = "Error " + oReq.status + " occurred uploading your file.<br \/>";
	// 	     }
	// 	};
	// 	oReq.send(oData);
	// });
</script>
</body>
</html>